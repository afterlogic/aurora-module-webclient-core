<div class="item file attachment" data-bind="
	css: cssClasses,
	event: isPopupItem() ? null : { 'dragstart': eventDragStart },
	draggablePlace: !isPopupItem() && allowDrag() ? $parent.dragAndDropHelperBinded : null,
	draggableDragStartCallback: function() {if (!isPopupItem() && allowDrag()) {$root.dragover(true);}},
	draggableDragStopCallback: function() {if (!isPopupItem() && allowDrag()) {$root.dragover(false);}}
">

	<!-- ko if: (allowHeader()) -->
	<span class="header">
		<span class="author" data-bind="text: ownerHeaderText"></span>
		<span class="date" data-bind="text: lastModifiedHeaderText"></span>
	</span>
	<!-- /ko -->

	<span class="item_content ui-droppable dragHandle">

		<span class="cancel" data-bind="click: function () { $parent.onFileRemove( uploadUid() ); }, customTooltip: '%MODULENAME%/ACTION_CANCEL'"></span>

		<span class="image">
			<!-- ko if: thumbnailSrc() !== '' -->
			<img class="thumb download" data-bind="attr: {'src': thumbnailSrc()},
				customTooltip: downloadTitle(), click: function (oViewModel, oEvent) { onIconClick(oViewModel, oEvent); }" />
			<span class="icon play" data-bind="click: viewFile, visible: hasHtmlEmbed()"></span>
			<!-- /ko -->
			<!-- ko if: thumbnailSrc() === '' -->
			<span class="icon download" data-bind="css: extension().toLowerCase() + (hasHtmlEmbed() ? ' ' + embedType().toLowerCase() : ''),
				customTooltip: downloadTitle(), click: function (oViewModel, oEvent) { onIconClick(oViewModel, oEvent); }"></span>
			<!-- /ko -->
		</span>

		<!-- ko if: (allowSharing()) -->
		<span class="shared_icon" data-bind="css: {'with_thumb': thumbnailSrc() !== ''}, click: function (oItem) { $root.onShareIconClick(oItem); }"></span>
		<!-- /ko -->
		<span class="progress" data-bind="visible: visibleProgress()">
			<span data-bind="style: {'width': progressPercent() + '%'}"></span>
		</span>
		<span class="status_text" data-bind="text: statusText(), css: {'hide': !(statusText().length > 0), 'error': uploadError()}, customTooltip: statusTooltip"></span>
		<div class="buttons" data-bind="visible: !isPopupItem(), css: {'hide': statusText().length > 0 || !uploaded()}">
			<!--ko if: isIosDevice -->
			<a class="button view" href="javascript: void(0)"
			   data-bind="i18n: {'key': '%MODULENAME%/ACTION_VIEW_FILE'}, click: function () {downloadFile();}"></a>
			<!-- /ko -->
			<!--ko if: !isIosDevice -->
			<a class="button download" href="javascript: void(0)" data-bind="visible: visibleDownloadLink(), click: function () { downloadFile(); }, i18n: {'key': '%MODULENAME%/ACTION_DOWNLOAD_FILE'}"></a>
			<a class="button open" href="javascript: void(0)" data-bind="visible: visibleOpenLink(), click: function () { openLink(); }, i18n: {'key': '%MODULENAME%/ACTION_OPEN_LINK'}"></a>
			<a class="button view" href="javascript: void(0)" data-bind="visible: visibleViewLink(), i18n: {'key': '%MODULENAME%/ACTION_VIEW_FILE'}, click: viewFile"></a>
			<!-- /ko -->
			<a class="button view" href="javascript: void(0)" data-bind="visible: visibleExpandLink(), i18n: {'key': '%MODULENAME%/ACTION_EXPAND_FILE'}, click: expandFile"></a>
			<span data-bind="visible: visibleExpandingText(), i18n: {'key': '%MODULENAME%/INFO_LOADING'}"></span>
			<a class="button view" href="javascript: void(0)" data-bind="visible: subFilesCollapsed(), i18n: {'key': '%MODULENAME%/ACTION_COLLAPSE_FILE'}, click: collapseFile"></a>
		</div>
	</span>

	<span class="size" data-bind="text: friendlySize()"></span>

	<span class="title" data-bind="customTooltip: fileName(), css: {no_size: friendlySize() === ''}">
		<span class="name" data-bind="text: displayName"></span>
		<!--<span class="ext" data-bind="text: '.' + extension(), visible: extension().length > 0"></span>-->
	</span>
	
	<div class="children" data-bind="visible: subFilesCollapsed()">
		<!-- ko template: {name: 'CoreWebclient_FileView', foreach: subFiles} --><!-- /ko -->
	</div>
</div>

<!-- ko if: isMessageType() && messagePart() -->
	<!-- ko template: {name: 'Mail_PrintMessageView', data: messagePart} --><!-- /ko -->
<!-- /ko -->
